I"ê‘<p>í˜ì¸íŠ¸ë³´ë“œë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í„°ì¹˜í•˜ì—¬ ê·¸ë¦¼ì„ ê·¸ë¦´ ê³µê°„ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.</p>

<p>&lt;PaintBoard.java&gt;</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PaintBoard</span> <span class="kd">extends</span> <span class="nc">View</span> <span class="o">{</span>

    <span class="kt">int</span> <span class="n">lastX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">lastY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="nc">Canvas</span> <span class="n">mCanvas</span><span class="o">;</span>
    <span class="nc">Paint</span> <span class="n">mPaint</span><span class="o">;</span>
    <span class="nc">Context</span> <span class="n">mContext</span><span class="o">;</span>
    <span class="nc">Bitmap</span> <span class="n">mBitmap</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">PaintBoard</span><span class="o">(</span><span class="nc">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
        <span class="n">mContext</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">PaintBoard</span><span class="o">(</span><span class="nc">Context</span> <span class="n">context</span><span class="o">,</span> <span class="nc">AttributeSet</span> <span class="n">attrs</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">attrs</span><span class="o">);</span>
        <span class="n">mContext</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onSizeChanged</span><span class="o">(</span><span class="kt">int</span> <span class="n">w</span><span class="o">,</span> <span class="kt">int</span> <span class="n">h</span><span class="o">,</span> <span class="kt">int</span> <span class="n">oldw</span><span class="o">,</span> <span class="kt">int</span> <span class="n">oldh</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mCanvas</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Canvas</span><span class="o">();</span>
        <span class="n">mPaint</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Paint</span><span class="o">();</span>
        <span class="n">mPaint</span><span class="o">.</span><span class="na">setStrokeWidth</span><span class="o">(</span><span class="mf">5.0</span><span class="no">F</span><span class="o">);</span>
        <span class="n">mBitmap</span> <span class="o">=</span> <span class="nc">Bitmap</span><span class="o">.</span><span class="na">createBitmap</span><span class="o">(</span><span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="nc">Bitmap</span><span class="o">.</span><span class="na">Config</span><span class="o">.</span><span class="na">ARGB_8888</span><span class="o">);</span>
        <span class="n">mCanvas</span><span class="o">.</span><span class="na">setBitmap</span><span class="o">(</span><span class="n">mBitmap</span><span class="o">);</span> <span class="c1">//ë¹„íŠ¸ë§µ ê°ì²´ì— ìº”ë²„ìŠ¤ ë‹¬ì•„ ê·¸ë¦¼ ê·¸ë¦´ ìˆ˜ ìˆë„ë¡ í•˜ê¸°ìœ„í•œ ì„¤ì •</span>
        <span class="cm">/* ì´í›„ë¶€í„°ëŠ” mCanvas ìœ„ì— ê·¸ë¦¬ëŠ” ê·¸ë¦¼ì€ mBitmapì— ì ìš©ëœë‹¤. */</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onTouchEvent</span><span class="o">(</span><span class="nc">MotionEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">action</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getAction</span><span class="o">();</span> <span class="c1">// ì•¡ì…˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°</span>
        <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">event</span><span class="o">.</span><span class="na">getX</span><span class="o">();</span> <span class="c1">// Xì¢Œí‘œ</span>
        <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">event</span><span class="o">.</span><span class="na">getY</span><span class="o">();</span> <span class="c1">// Yì¢Œí‘œ</span>

        <span class="k">switch</span><span class="o">(</span><span class="n">action</span><span class="o">){</span>

            <span class="cm">/* ì´ë™ì¤‘ì— ì´ì „ ì¢Œí‘œê°’ê³¼ í˜„ì¬ ì¢Œí‘œê°’ ì—°ê²°í•´ì„œ ì„  ê·¸ë¦¬ê¸°*/</span>
            <span class="k">case</span> <span class="nc">MotionEvent</span><span class="o">.</span><span class="na">ACTION_MOVE</span><span class="o">:</span>
                <span class="k">if</span><span class="o">(</span><span class="n">lastX</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">){</span>
                    <span class="n">mCanvas</span><span class="o">.</span><span class="na">drawLine</span><span class="o">(</span><span class="n">lastX</span><span class="o">,</span> <span class="n">lastY</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">mPaint</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">lastX</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
                <span class="n">lastY</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>

                <span class="k">break</span><span class="o">;</span>

            <span class="cm">/* ì†ì„ ë–¼ë©´ ìµœì¢… ì¢Œí‘œê°’ (-1, -1)ë¡œ ë¦¬ì…‹*/</span>
            <span class="k">case</span> <span class="nc">MotionEvent</span><span class="o">.</span><span class="na">ACTION_UP</span><span class="o">:</span>
                <span class="n">lastX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                <span class="n">lastY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>

                <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">invalidate</span><span class="o">();</span> <span class="c1">// ë‹¤ì‹œ onDraw() ë©”ì†Œë“œ í˜¸ì¶œí•˜ì—¬ ê·¸ë¦¬ê¸°</span>

        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onDraw</span><span class="o">(</span><span class="nc">Canvas</span> <span class="n">canvas</span><span class="o">)</span> <span class="o">{</span>
        <span class="cm">/* ê·¸ë¦¼ì´ ê·¸ë ¤ì§„ ë¹„íŠ¸ë§µì„ í™”ë©´ì— í‘œì‹œí•˜ê¸° */</span>
        <span class="n">canvas</span><span class="o">.</span><span class="na">drawBitmap</span><span class="o">(</span><span class="n">mBitmap</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">mPaint</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/* í˜ì¸íŠ¸ ìƒ‰ ì„¤ì •ì„ ìœ„í•œ ë©”ì†Œë“œ */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPaintColor</span><span class="o">(</span><span class="nd">@ColorInt</span> <span class="kt">int</span> <span class="n">color</span><span class="o">){</span>
        <span class="n">mPaint</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">color</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ê·¸ë¦¼ì„ ê·¸ë¦¬ê¸°ìœ„í•´ì„œ ë¹„íŠ¸ë§µê³¼ ìº”ë²„ìŠ¤, í˜ì¸íŠ¸ ê°ì²´ë¥¼ ë§Œë“¤ì—ˆë‹¤. ë¹„íŠ¸ë§µ ê°ì²´ì— ìº”ë²„ìŠ¤ë¥¼ ì„¤ì •í•˜ì—¬ ì»¨ë²„ìŠ¤ì— ê·¸ë¦¼ì„ ê·¸ë¦¬ë©´ ë¹„íŠ¸ë§µ ê°ì²´ì— ì ìš©ë˜ë„ë¡ í–ˆë‹¤. í˜ì¸íŠ¸ ê°ì²´ëŠ” ê·¸ë¦¼ì˜ ìƒ‰, ì„ ì˜ ë‘ê»˜ ë“±ì„ ì§€ì •í•˜ê¸° ìœ„í•œ ê²ƒì´ë‹¤.</p>

<p>ê·¸ ë‹¤ìŒìœ¼ë¡œ ì»¤ìŠ¤í…€ë·°ì˜ <code class="highlighter-rouge">onTouchEvent()</code> ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ì—¬ í„°ì¹˜ë¥¼ í†µí•´ ê·¸ë¦¼ì´ ê·¸ë ¤ì§€ë„ë¡ í–ˆë‹¤. í„°ì¹˜ ì´ë²¤íŠ¸ì˜ ì•¡ì…˜ì •ë³´ë¥¼ ì½ì–´ì„œ ì–´ë–¤ ì´ë²¤íŠ¸ì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤. <code class="highlighter-rouge">MotionEvent.ACTION_UP</code>ì„ í†µí•´ ì†ì„ ë–¼ë©´ (X,Y) ì¢Œí‘œê°€ (-1, -1)ì´ ë˜ë„ë¡ í•œë‹¤. ê·¸ë¦¬ê³  <code class="highlighter-rouge">MotionEvent.ACTION_MOVE</code> ì¼ ë•Œ Xë‚˜ Yê°€ í•˜ë‚˜ë¼ë„ -1ì´ ì•„ë‹ˆë©´ ê³„ì† ê·¸ë¦¼ì„ ì¤‘ì´ë¼ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ìº”ë²„ìŠ¤ì˜ <code class="highlighter-rouge">drawLine()</code> ë©”ì†Œë“œë¥¼ í†µí•´ ê·¸ë¦¼ì„ ê·¸ë¦°ë‹¤. ì´ ë•Œ ì´ì „ ì¢Œí‘œì™€ í˜„ì¬ ì¢Œí‘œë¥¼ ì‡ëŠ” ë¼ì¸ì„ ê·¸ë¦¬ë„ë¡ í–ˆë‹¤.</p>

<p><code class="highlighter-rouge">setPaintColor(int color)</code> ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ë©´ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ëŠ” ìƒ‰ì„ í†µí•´ í˜ì¸íŠ¸ì˜ ìƒ‰ì„ ì„¤ì •í•œë‹¤.</p>

<p><br />
<br /></p>

<p>ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•˜ë©´ ë³´ì¼ í™”ë©´ìœ¼ë¡œ ì•„ë˜ì˜ XML ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.</p>

<p>&lt;activity_paint_board&gt;</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:id=</span><span class="s">"@+id/toolsLayout"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:orientation=</span><span class="s">"horizontal"</span>
        <span class="na">android:padding=</span><span class="s">"5dp"</span>
        <span class="na">android:background=</span><span class="s">"#ffffffff"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;Button</span>
            <span class="na">android:id=</span><span class="s">"@+id/colorBtn"</span>
            <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
            <span class="na">android:drawableTop=</span><span class="s">"@drawable/colorpalette"</span>
            <span class="na">android:drawablePadding=</span><span class="s">"2dp"</span>
            <span class="na">android:text=</span><span class="s">"ìƒ‰ìƒ"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;/LinearLayout&gt;</span>

    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:id=</span><span class="s">"@+id/boardLayout"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
        <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div></div>
<p>ìƒ‰ì„ ë°”ê¾¸ê¸° ìœ„í•œ ë²„íŠ¼ì´ í•˜ë‚˜ ìˆê³  ê·¸ ì•„ë˜ì—ëŠ” ìœ„ì—ì„œ ë§Œë“  ì»¤ìŠ¤í…€ë·°ë¥¼ ì¶”ê°€í•  ê³µê°„ì´ ìˆë„ë¡ êµ¬ì„±í•˜ì˜€ë‹¤.</p>

<p><br />
<br /></p>

<p>&lt;PaintBoardActivity.java&gt;</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PaintBoardActivity</span> <span class="kd">extends</span> <span class="nc">AppCompatActivity</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kt">int</span> <span class="no">REQUEST_CODE_COLOR_PALETTE_DIALOG</span> <span class="o">=</span> <span class="mi">101</span><span class="o">;</span>

    <span class="nc">LinearLayout</span> <span class="n">boardLayout</span><span class="o">;</span>
    <span class="nc">Button</span> <span class="n">colorBtn</span><span class="o">;</span>
    <span class="nc">PaintBoard</span> <span class="n">board</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_paint_board</span><span class="o">);</span>

        <span class="cm">/* í˜ì¸íŠ¸ë³´ë“œ ë ˆì´ì•„ì›ƒì— í˜ì¸íŠ¸ë³´ë“œ ë·° ê°ì²´ ì¶”ê°€ */</span>
        <span class="n">boardLayout</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">boardLayout</span><span class="o">);</span>
        <span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PaintBoard</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="n">boardLayout</span><span class="o">.</span><span class="na">addView</span><span class="o">(</span><span class="n">board</span><span class="o">);</span>

        <span class="n">colorBtn</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">colorBtn</span><span class="o">);</span>

        <span class="n">colorBtn</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="nc">ColorPaletteDialog</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="no">REQUEST_CODE_COLOR_PALETTE_DIALOG</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="no">REQUEST_CODE_COLOR_PALETTE_DIALOG</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">resultCode</span> <span class="o">==</span> <span class="no">RESULT_OK</span><span class="o">){</span>
                <span class="nd">@ColorInt</span> <span class="kt">int</span> <span class="n">color</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">getIntExtra</span><span class="o">(</span><span class="s">"color"</span><span class="o">,</span> <span class="mh">0xff000000</span><span class="o">);</span>
                <span class="n">board</span><span class="o">.</span><span class="na">setPaintColor</span><span class="o">(</span><span class="n">color</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ë ˆì´ì•„ì›ƒì— ì•„ê¹Œ ë§Œë“  PaintBoard ê°ì²´ë¥¼ ì¶”ê°€í–ˆë‹¤. ê·¸ë¦¬ê³  ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ìƒ‰ ì„ íƒì„ ìœ„í•œ ëŒ€í™”ìƒìë¥¼ ë„ìš°ë„ë¡ í–ˆë‹¤. ëŒ€í™”ìƒìì—ì„œ ìƒ‰ ì„ íƒì„ ì™„ë£Œí–ˆì„ ë•Œ ì´ ì •ë³´ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ <code class="highlighter-rouge">onActivityResult()</code> ë©”ì†Œë“œë¥¼ ì¬ì •ì˜í•˜ì˜€ë‹¤. ì—¬ê¸°ì„œëŠ” ì¸í…íŠ¸ë¥¼ í†µí•´ ì–´ë–¤ ìƒ‰ì„ ì„ íƒí–ˆëŠ”ì§€ ì •ë³´ë¥¼ ë°›ëŠ”ë‹¤. ê·¸ë¦¬ê³  <code class="highlighter-rouge">board.setPaintColor(color)</code> ë©”ì†Œë“œë¥¼ í†µí•´ í˜ì¸íŠ¸ ìƒ‰ì„ ì„¤ì •í•œë‹¤.</p>

<p><br />
<br />
ê·¸ëŸ¬ë©´ ìƒ‰ì„ ì„ íƒí•  ëŒ€í™”ìƒìì˜ ë·°ë¥¼ ìœ„í•´ ì•„ë˜ì˜ XML ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.</p>

<p>&lt;activity_color_palette_dialog&gt;</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span>
    <span class="na">android:background=</span><span class="s">"#ff000000"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/textView"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"ìƒ‰ìƒ ì„ íƒ"</span>
        <span class="na">android:textColor=</span><span class="s">"#ffffffff"</span>
        <span class="na">android:textSize=</span><span class="s">"20dp"</span>
        <span class="na">android:layout_margin=</span><span class="s">"10dp"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;GridView</span>
        <span class="na">android:id=</span><span class="s">"@+id/colorGrid"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_gravity=</span><span class="s">"center"</span>
        <span class="na">android:layout_margin=</span><span class="s">"20dp"</span>
        <span class="na">android:numColumns=</span><span class="s">"7"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/GridView&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:id=</span><span class="s">"@+id/closeBtn"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:drawableLeft=</span><span class="s">"@drawable/cancel_btn"</span>
        <span class="na">android:drawablePadding=</span><span class="s">"4dp"</span>
        <span class="na">android:text=</span><span class="s">"ì™„ë£Œ"</span>
        <span class="na">android:layout_gravity=</span><span class="s">"center_horizontal"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div></div>

<p>ê·¸ë¦¬ë“œë·°ë¥¼ í†µí•´ ì—¬ëŸ¬ê°œì˜ ìƒ‰ì„ ë³´ì—¬ì¤€ë‹¤. ê·¸ë¦¬ê³  ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìƒ‰ ì„¤ì •ì´ ì™„ë£Œë˜ë„ë¡ í•  ê²ƒì´ë‹¤. ê·¸ë¦¬ë“œë·°ì˜ ë°ì´í„°ì™€ ë·°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì–´ëŒ‘í„°ë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì•¼í•œë‹¤. ì•„ë˜ëŠ” ìƒ‰ ì„¤ì • ì–´ëŒ‘í„° ì½”ë“œì´ë‹¤.</p>

<p>&lt;ColorAdapter.java&gt;</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">io.swnomad.jcgpaintboard</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.ViewGroup</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.BaseAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.GridView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ColorAdapter</span> <span class="kd">extends</span> <span class="nc">BaseAdapter</span> <span class="o">{</span>

    <span class="nc">Context</span> <span class="n">mContext</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">colors</span> <span class="o">=</span> <span class="o">{</span><span class="mh">0xff000000</span><span class="o">,</span><span class="mh">0xff00007f</span><span class="o">,</span><span class="mh">0xff0000ff</span><span class="o">,</span><span class="mh">0xff007f00</span><span class="o">,</span><span class="mh">0xff007f7f</span><span class="o">,</span><span class="mh">0xff00ff00</span><span class="o">,</span><span class="mh">0xff00ff7f</span><span class="o">,</span>
            <span class="mh">0xff00ffff</span><span class="o">,</span><span class="mh">0xff7f007f</span><span class="o">,</span><span class="mh">0xff7f00ff</span><span class="o">,</span><span class="mh">0xff7f7f00</span><span class="o">,</span><span class="mh">0xff7f7f7f</span><span class="o">,</span><span class="mh">0xffff0000</span><span class="o">,</span><span class="mh">0xffff007f</span><span class="o">,</span>
            <span class="mh">0xffff00ff</span><span class="o">,</span><span class="mh">0xffff7f00</span><span class="o">,</span><span class="mh">0xffff7f7f</span><span class="o">,</span><span class="mh">0xffff7fff</span><span class="o">,</span><span class="mh">0xffffff00</span><span class="o">,</span><span class="mh">0xffffff7f</span><span class="o">,</span><span class="mh">0xffffffff</span><span class="o">};</span>


    <span class="kt">int</span> <span class="n">rowCount</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">colCount</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ColorAdapter</span><span class="o">(</span><span class="nc">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>
        <span class="n">mContext</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>

        <span class="n">rowCount</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
        <span class="n">colCount</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">rowCount</span> <span class="o">*</span> <span class="n">colCount</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">getItem</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">colors</span><span class="o">[</span><span class="n">position</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getItemId</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">position</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">getView</span><span class="o">(</span><span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="nc">View</span> <span class="n">convertView</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">parent</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">GridView</span><span class="o">.</span><span class="na">LayoutParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GridView</span><span class="o">.</span><span class="na">LayoutParams</span><span class="o">(</span><span class="nc">GridView</span><span class="o">.</span><span class="na">LayoutParams</span><span class="o">.</span><span class="na">MATCH_PARENT</span>
                <span class="o">,</span> <span class="nc">GridView</span><span class="o">.</span><span class="na">LayoutParams</span><span class="o">.</span><span class="na">MATCH_PARENT</span><span class="o">);</span>

        <span class="cm">/* ê·¸ë¦¬ë“œë·°ì˜ ê° ì•„ì´í…œì´ ë³´ì´ëŠ” ë·° ì„¤ì •*/</span>
        <span class="nc">TextView</span> <span class="n">view</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextView</span><span class="o">(</span><span class="n">mContext</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">setLayoutParams</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">setPadding</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">setBackgroundColor</span><span class="o">(</span><span class="n">colors</span><span class="o">[</span><span class="n">position</span><span class="o">]);</span>
        <span class="n">view</span><span class="o">.</span><span class="na">setHeight</span><span class="o">(</span><span class="mi">120</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">view</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ë°°ì—´ì— 21ê°€ì§€ì˜ ìƒ‰ìƒì„ ì €ì¥í–ˆë‹¤. ê·¸ë¦¬ê³  ê°ê°ì˜ ì•„ì´í…œì´ ë³´ì´ëŠ” ë·°ëŠ” ë”°ë¡œ XMLë¡œ ì‘ì„±í•˜ì§€ ì•Šê³  <code class="highlighter-rouge">getView()</code> ë©”ì†Œë“œ ë‚´ì—ì„œ ê°„ë‹¨í•˜ê²Œ í…ìŠ¤íŠ¸ë·°ë¡œ ë§Œë“¤ì—ˆë‹¤. í…ìŠ¤íŠ¸ë·°ì˜ ë°°ê²½ì€ ê° ì•„ì´í…œì´ ë³´ì—¬ì¤„ ìƒ‰ìœ¼ë¡œ ì§€ì •í–ˆë‹¤. ê·¸ë¦¬ê³  ì´ ë·°ë¥¼ ë¦¬í„´í•œë‹¤.</p>

<p><br /></p>

<p>ì´ì œ ìƒ‰ìƒ ì„ íƒì„ ìœ„í•œ ëŒ€í™”ìƒìë¥¼ ìœ„í•œ ìë°” ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.
&lt;ColorPaletteDialog.java&gt;</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ColorPaletteDialog</span> <span class="kd">extends</span> <span class="nc">Activity</span> <span class="o">{</span>

    <span class="nc">GridView</span> <span class="n">colorGrid</span><span class="o">;</span>
    <span class="nc">Button</span> <span class="n">closeBtn</span><span class="o">;</span>
    <span class="nc">TextView</span> <span class="n">textView</span><span class="o">;</span>

    <span class="nc">ColorAdapter</span> <span class="n">adapter</span><span class="o">;</span>

    <span class="nc">Context</span> <span class="n">mContext</span><span class="o">;</span>
    <span class="nd">@ColorInt</span> <span class="kt">int</span> <span class="n">selectedColor</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ColorPaletteDialog</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>
        <span class="n">mContext</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_color_palette_dialog</span><span class="o">);</span>

        <span class="n">colorGrid</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">colorGrid</span><span class="o">);</span>
        <span class="n">closeBtn</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">closeBtn</span><span class="o">);</span>
        <span class="n">textView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textView</span><span class="o">);</span>
        <span class="n">adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ColorAdapter</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="n">colorGrid</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">adapter</span><span class="o">);</span>

        <span class="n">colorGrid</span><span class="o">.</span><span class="na">setOnItemClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">AdapterView</span><span class="o">.</span><span class="na">OnItemClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onItemClick</span><span class="o">(</span><span class="nc">AdapterView</span><span class="o">&lt;?&gt;</span> <span class="n">parent</span><span class="o">,</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">,</span> <span class="kt">long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">selectedColor</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">adapter</span><span class="o">.</span><span class="na">getItem</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
                <span class="n">textView</span><span class="o">.</span><span class="na">setTextColor</span><span class="o">(</span><span class="n">selectedColor</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">closeBtn</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Intent</span><span class="o">();</span>
                <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"color"</span><span class="o">,</span> <span class="n">selectedColor</span><span class="o">);</span>
                <span class="n">setResult</span><span class="o">(</span><span class="no">RESULT_OK</span><span class="o">,</span> <span class="n">intent</span><span class="o">);</span>
                <span class="o">((</span><span class="nc">ColorPaletteDialog</span><span class="o">)</span><span class="n">mContext</span><span class="o">).</span><span class="na">finish</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>ì–´ëŒ‘í„° ê°ì²´ë¥¼ ë§Œë“¤ì–´ ê·¸ë¦¬ë“œë·°ì— ì„¤ì •í•´ì¤€ë‹¤. ê·¸ë¦¬ê³  ê·¸ë¦¬ë“œë·°ì— ì•„ì´í…œ í´ë¦­ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•´ì£¼ê³  <code class="highlighter-rouge">onItemClick()</code> ë©”ì†Œë“œì—ì„œëŠ” ì„ íƒëœ ìƒ‰ìƒ ì •ë³´ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•œ í›„ í…ìŠ¤íŠ¸ë·°ì˜ ìƒ‰ì„ ë°”ê¿”ì£¼ì–´ ì‚¬ìš©ìê°€ ìƒ‰ì´ ì„ íƒë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.</p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ â€˜ì™„ë£Œâ€™ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì¸í…íŠ¸ì— ì„ íƒëœ ìƒ‰ ì •ë³´ë¥¼ ë¶€ê°€ë°ì´í„°ë¡œ ë‹´ì•„ì„œ ë¶€ëª¨ ì•¡í‹°ë¹„í‹°ë¡œ ì‘ë‹µì„ ë³´ë‚¸ë‹¤. ê·¸ëŸ¬ë©´ ì•„ê¹Œ ë³¸ ê²ƒì²˜ëŸ¼ <code class="highlighter-rouge">PaintBoardActivity</code>ì—ì„œëŠ” ì´ ìƒ‰ ì •ë³´ë¥¼ ì‚¬ìš©í•´ í˜ì¸íŠ¸ì˜ ìƒ‰ì„ ì„¤ì •í•œë‹¤.</p>

<p>ë˜í•œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì—ì„œ ì•±ì„ ì‹œì‘í–ˆì„ ë•Œ ì²˜ìŒìœ¼ë¡œ ë™ì‘ì‹œí‚¬ ì•¡í‹°ë¹„í‹°ë¥¼ <code class="highlighter-rouge">PaintBoardActivity</code>ë¡œ ë°”ê¾¸ë©´ ì•±ì´ ì™„ì„±ëœë‹¤.</p>

<p>ì•±ì„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì˜ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/images/android/44/1.jpg" alt="1" width="30%" height="30%" />
<img src="/images/android/44/2.jpg" alt="2" width="30%" height="30%" />
<img src="/images/android/44/3.jpg" alt="3" width="30%" height="30%" />
<img src="/images/android/44/4.jpg" alt="4" width="30%" height="30%" />
<img src="/images/android/44/5.jpg" alt="5" width="30%" height="30%" /></p>
:ET