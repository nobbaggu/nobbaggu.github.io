I"ïg<p>ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ì(Broadcast Receiver)ëŠ” ì•ˆë“œë¡œì´ë“œì˜ 4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ì´ë‹¤. ì„œë¹„ìŠ¤(Service)ì²˜ëŸ¼ UIê°€ ì—†ê³  ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë™ì‘í•œë‹¤. ë¸Œë¡œë“œìºìŠ¤íŠ¸(Broadcast)ê°€ â€˜ë°©ì†¡â€™ì´ë€ ëœ»ì´ë‹ˆë§Œí¼, ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìëŠ” ì•ˆë“œë¡œì´ë“œ ì „ì²´ì— í•œë²ˆì— ë¿Œë ¤ì§€ëŠ” ê¸€ë¡œë²Œ ì´ë²¤íŠ¸(Global Event)ë¥¼ ë°›ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì»´í¬ë„ŒíŠ¸ì´ë‹¤. ê¸€ë¡œë²Œ ì´ë²¤íŠ¸ë¡œëŠ” ì „í™” ìˆ˜ì‹ ì´ë‚˜ ë¬¸ì ìˆ˜ì‹ ë“±ì´ ìˆë‹¤.</p>

<p>ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìë¥¼ ì¶”ê°€í•˜ê³ , ì¸í…íŠ¸í•„í„°ë¥¼ í†µí•´ ë°›ê³ ì‹¶ì€ ì¸í…íŠ¸ë¥¼ ì„¤ì •í•˜ë©´ ë“±ë¡í•´ë‘” ì¸í…íŠ¸ê°€ ì•ˆë“œë¡œì´ë“œ ì „ì²´ì— ë¿Œë ¤ì¡Œì„ ë•Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìê°€ ê·¸ ì¸í…íŠ¸ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</p>

<p>ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìëŠ” onReceiver() ë©”ì†Œë“œë¥¼ ì¬ì •ì˜í•˜ì—¬ì•¼ í•œë‹¤. ì´ ë©”ì†Œë“œëŠ” ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìì˜ ì¸í…íŠ¸ì— ë“±ë¡ëœ ì¸í…íŠ¸ê°€ ë„ì°©í•˜ë©´ ìë™ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.</p>

<p>ê·¸ëŸ¬ë©´ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìì—ì„œ ë¬¸ì ë©”ì‹œì§€ë¥¼ ë°›ë„ë¡ ì„¤ì •ì„ í•œ í›„ ë©”ì‹œì§€ê°€ ì˜¤ë©´ ë‚´ìš©ì„ ê°€ì ¸ì™€ ì•¡í‹°ë¹„í‹°ì˜ í…ìŠ¤íŠ¸ë·°ì— ì„¤ì •í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ë³´ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">io.swnomad.samplereceiver</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.content.BroadcastReceiver</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Build</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.telephony.SmsMessage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SmsReceiver</span> <span class="kd">extends</span> <span class="nc">BroadcastReceiver</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReceive</span><span class="o">(</span><span class="nc">Context</span> <span class="n">context</span><span class="o">,</span> <span class="nc">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getExtras</span><span class="o">();</span> <span class="c1">//ì¸í…íŠ¸ì—ì„œ ë¶€ê°€ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</span>

        <span class="c1">//bundleì— ë“¤ì–´ìˆëŠ” SMS ë©”ì‹œì§€ë¥¼ parsing</span>
        <span class="nc">SmsMessage</span><span class="o">[]</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">parseSmsMessage</span><span class="o">(</span><span class="n">bundle</span><span class="o">);</span>

        <span class="k">if</span><span class="o">(</span><span class="n">messages</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">messages</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span><span class="mi">0</span><span class="o">){</span>
            <span class="nc">String</span> <span class="n">sender</span> <span class="o">=</span> <span class="n">messages</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">getOriginatingAddress</span><span class="o">();</span> <span class="c1">// ë©”ì‹œì§€ ì†¡ì‹ ì</span>
            <span class="nc">String</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">messages</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">getMessageBody</span><span class="o">();</span> <span class="c1">// ë©”ì‹œì§€ ë‚´ìš©</span>
            <span class="nc">Date</span> <span class="n">receivedDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="n">messages</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">getTimestampMillis</span><span class="o">());</span> <span class="c1">// ìˆ˜ì‹  ë‚ ì§œ</span>
            <span class="nc">String</span> <span class="n">date</span> <span class="o">=</span> <span class="n">receivedDate</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>

            <span class="c1">//MainActivityë¡œ ë³´ë‚¼ ì¸í…íŠ¸ ë§Œë“¤ê³  ë©”ì‹œì§€ ì •ë³´ ë¶€ê°€ë°ì´í„°ë¡œ ë„£ê¸°</span>
            <span class="nc">Intent</span> <span class="n">mIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getApplicationContext</span><span class="o">(),</span> <span class="nc">MainActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="n">mIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"sender"</span><span class="o">,</span> <span class="n">sender</span><span class="o">);</span>
            <span class="n">mIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"contents"</span><span class="o">,</span> <span class="n">contents</span><span class="o">);</span>
            <span class="n">mIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"date"</span><span class="o">,</span> <span class="n">date</span><span class="o">);</span>

            <span class="c1">//ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìëŠ” í™”ë©´ì´ ì—†ìœ¼ë¯€ë¡œ ìƒˆë¡œìš´ ì•¡í‹°ë¹„í‹° í™”ë©´ ìƒˆë¡œ ë„ìš°ë ¤ë©´ ì¸í…íŠ¸ì— FLAG_ACTIVITY_NEW_TASK ì¶”ê°€í•´ì•¼í•¨</span>
            <span class="n">mIntent</span><span class="o">.</span><span class="na">addFlags</span><span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_NEW_TASK</span><span class="o">);</span> <span class="c1">// -&gt; onCreate() ë©”ì†Œë“œì—ì„œ ì²˜ë¦¬</span>

            <span class="c1">//ì´ë¯¸ ì•¡í‹°ë¹„í‹°ê°€ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ë©´ ìƒˆë¡œ ë§Œë“¤ì§€ ë§ê³  ì‚¬ìš© -&gt; onNewIntent() ë©”ì†Œë“œì—ì„œ ì²˜ë¦¬</span>
            <span class="n">mIntent</span><span class="o">.</span><span class="na">addFlags</span><span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_SINGLE_TOP</span> <span class="o">|</span> <span class="nc">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_CLEAR_TOP</span><span class="o">);</span>

            <span class="cm">/*
            1. ë§Œë“¤ì–´ì§„ ì•¡í‹°ë¹„í‹°ê°€ ì—†ìœ¼ë©´ onCreate() ë©”ì†Œë“œì—ì„œ ì¸í…íŠ¸ë¥¼ ì²˜ë¦¬
            2. ì´ë¯¸ ë§Œë“¤ì–´ì§„ ì•¡í‹°ë¹„í‹°ê°€ ìˆìœ¼ë©´ onNewIntent() ë©”ì†Œë“œì—ì„œ ì¸í…íŠ¸ë¥¼ ì²˜ë¦¬
             */</span>

            <span class="c1">//ì•¡í‹°ë¹„í‹° ë„ìš°ê¸°</span>
            <span class="n">context</span><span class="o">.</span><span class="na">getApplicationContext</span><span class="o">().</span><span class="na">startActivity</span><span class="o">(</span><span class="n">mIntent</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/* 1. Bundle ê°ì²´ì—ì„œ PDU í¬ë§·ì˜ ë©”ì‹œì§€ ê°ì²´ ê°€ì ¸ì˜¤ê¸°
           2. ë©”ì‹œì§€ ê°ì²´ ê°¯ìˆ˜ë§Œí¼ SmsMessage ë°°ì—´ ë§Œë“¤ê¸°
           3. createFromPdu() ë©”ì†Œë“œ ì‚¬ìš©í•´ì„œ PDU í¬ë§·ì˜ ë©”ì‹œì§€ SmsMessage ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ SmsMessage ë°°ì—´ì— ì €ì¥ */</span>
    <span class="kd">private</span> <span class="nc">SmsMessage</span><span class="o">[]</span> <span class="nf">parseSmsMessage</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">bundle</span><span class="o">){</span>
        <span class="nc">Object</span><span class="o">[]</span> <span class="n">objs</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Object</span><span class="o">[])</span> <span class="n">bundle</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"pdus"</span><span class="o">);</span> <span class="c1">//PDU í¬ë§·ì˜ ë©”ì‹œì§€ ë³µì›</span>
        <span class="nc">SmsMessage</span><span class="o">[]</span> <span class="n">messages</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SmsMessage</span><span class="o">[</span><span class="n">objs</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>

        <span class="kt">int</span> <span class="n">smsCount</span> <span class="o">=</span> <span class="n">objs</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">smsCount</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="k">if</span><span class="o">(</span><span class="nc">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="nc">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">M</span><span class="o">){</span> <span class="c1">// API 23 ì´ìƒ</span>
                <span class="nc">String</span> <span class="n">format</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"format"</span><span class="o">);</span>
                <span class="n">messages</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="nc">SmsMessage</span><span class="o">.</span><span class="na">createFromPdu</span><span class="o">((</span><span class="kt">byte</span><span class="o">[])</span><span class="n">objs</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">format</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="n">messages</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="nc">SmsMessage</span><span class="o">.</span><span class="na">createFromPdu</span><span class="o">((</span><span class="kt">byte</span><span class="o">[])</span><span class="n">objs</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">messages</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë™ì‘í•˜ë‹¤ê°€ ì¸í…íŠ¸ í•„í„°ì— ë“±ë¡í•´ë†“ì€ ì¸í…íŠ¸ê°€ ë„ì°©í•˜ë©´ onReceive() ë©”ì†Œë“œê°€ í˜¸ì¶œë„ë¯€ë¡œ ì´ ë©”ì†Œë“œì•ˆì— ì¸í…íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤. ë¨¼ì € ìœ„í—˜ê¶Œí•œì— ëŒ€í•œ ë¶€ë¶„ì€ ë¬´ì‹œí•˜ì. ë¨¼ì € ì¸í…íŠ¸ë¡œë¶€í„° ë²ˆë“¤ ê°ì²´ë¥¼ ë°›ëŠ”ë‹¤. ê·¸ë¦¬ê³  ë²ˆë“¤ ê°ì²´ì˜ ë‚´ìš©ì„ SmsMessage ìë£Œí˜•ìœ¼ë¡œ ê³ ì³ì•¼í•˜ëŠ”ë°, ì´ ì½”ë“œëŠ” parseSmsMessage(Bundle bundle) ë©”ì†Œë“œë¡œ ë”°ë¡œ ë§Œë“¤ì—ˆë‹¤.</p>

<p>parseSmsMessage() ë©”ì†Œë“œì— ìˆëŠ” ì½”ë“œëŠ” ì•ˆë“œë¡œì´ë“œì—ì„œ APIì—ì„œ ì •í•´ë‘” SMSë¥¼ í™•ì¸í•˜ëŠ” ì¼ë°˜ì ì¸ ì½”ë“œì´ë¯€ë¡œ í•œ ë²ˆ ë§Œë“¤ì–´ë‘ë©´ ë‚˜ì¤‘ì— í•„ìš”í•  ë•Œ ë§ˆë‹¤ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë”±íˆ ì™¸ìš¸ í•„ìš”ëŠ” ì—†ê³  createFromPdu ë©”ì†Œë“œë¡œ Object ê°ì²´ í˜•íƒœì—ì„œ SmsMessage ê°ì²´ë¡œ í¬ë§·ì„ ë³€í™˜í•œë‹¤ëŠ” í•µì‹¬ë‚´ìš©ë§Œ ì•Œë©´ ë  ê²ƒ ê°™ë‹¤.</p>

<p>ì•„ë¬´íŠ¼ ë¬¸ì ë©”ì‹œì§€ë¥¼ íŒŒì‹±í•˜ì—¬ ë°œì‹ ì, ë‚´ìš©, ë‚ ì§œë¥¼ ì½ì–´ì™€ì„œ ì´ë¥¼ ë˜ ì¸í…íŠ¸ì— ë¶€ê°€ ë°ì´í„°ë¡œ ì¶”ê°€í•˜ì—¬ MainActivityë¡œ ë³´ë‚¸ë‹¤. ì´ ë•Œ ì¤‘ìš”í•œ ê²ƒì´ ìˆë‹¤. ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ìëŠ” í™”ë©´ì´ ì—†ëŠ” ì»´í¬ë„ŒíŠ¸ì´ë¯€ë¡œ ì•¡í‹°ë¹„í‹° í™”ë©´ì„ ìƒˆë¡œ ë„ìš°ê¸° ìœ„í•´ì„œëŠ” FLAG_ACTIVITY_NEW_TASK í”Œë˜ê·¸ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼í•œë‹¤. FLAG_ACTIVITY_SINGLE_TOP í”Œë˜ê·¸ë„ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ ì´ë¯¸ ë– ìˆëŠ” ì•¡í‹°ë¹„í‹°ê°€ ìˆìœ¼ë©´ ì´ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•´ì•¼í•œë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ë•ŒëŠ” onCreate() ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ì§€ ì•Šìœ¼ë¯€ë¡œ onNewIntent() ë©”ì†Œë“œë¥¼ ì¬ì •ì˜í•˜ì—¬ ì¸í…íŠ¸ ì²˜ë¦¬ë¶€ ì½”ë“œë¥¼ ë„£ì–´ì£¼ì–´ì•¼í•œë‹¤.</p>

<p>ì´ì œ ì•¡í‹°ë¹„í‹°ì—ì„œ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ë³´ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">io.swnomad.samplereceiver</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.Manifest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.SharedPreferences</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.pm.PackageManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Build</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v4.app.ActivityCompat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v4.content.ContextCompat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.telephony.SmsMessage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="nc">AppCompatActivity</span> <span class="o">{</span>

    <span class="nc">TextView</span> <span class="n">textView</span><span class="o">;</span> <span class="c1">//ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ í…ìŠ¤íŠ¸ë·°</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>

        <span class="c1">//RECEIVE_SMSëŠ” ìœ„í—˜ê¶Œí•œì´ë¯€ë¡œ ì‚¬ìš©ìì—ê²Œ ê¶Œí•œ ìš”ì²­ì„ í•˜ê¸°ìœ„í•œ ì½”ë“œ</span>
        <span class="kt">int</span> <span class="n">permissionCheck</span> <span class="o">=</span> <span class="nc">ContextCompat</span><span class="o">.</span><span class="na">checkSelfPermission</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nc">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">RECEIVE_SMS</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">permissionCheck</span> <span class="o">==</span> <span class="nc">PackageManager</span><span class="o">.</span><span class="na">PERMISSION_GRANTED</span><span class="o">){</span>
            <span class="nc">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"SMS ìˆ˜ì‹ ê¶Œí•œ ìˆìŒ"</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="nc">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"SMS ìˆ˜ì‹ ê¶Œí•œ ì—†ìŒ"</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="nc">ActivityCompat</span><span class="o">.</span><span class="na">shouldShowRequestPermissionRationale</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="nc">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">RECEIVE_SMS</span><span class="o">)){</span>
                <span class="nc">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"SMS ê¶Œí•œ ì„¤ì •ì´ í•„ìš”í•¨"</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="c1">// ê¶Œí•œì´ í• ë‹¹ë˜ì§€ ì•Šì•˜ìœ¼ë©´ í•´ë‹¹ ê¶Œí•œì„ ìš”ì²­</span>
                <span class="nc">ActivityCompat</span><span class="o">.</span><span class="na">requestPermissions</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span><span class="nc">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">RECEIVE_SMS</span><span class="o">},</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">//í…ìŠ¤íŠ¸ë·° ê°ì²´ ì°¸ì¡°í•˜ê¸°</span>
        <span class="n">textView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">textView</span><span class="o">);</span>

        <span class="nc">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">getIntent</span><span class="o">();</span>

        <span class="c1">// ì¸í…íŠ¸ë¡œë¶€í„° ë°œì‹ ì, ë‚´ìš©, ë‚ ì§œ ì •ë³´ ë°›ì•„ì™€ì„œ ì €ì¥</span>
        <span class="nc">String</span> <span class="n">sender</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"sender"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"contents"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">date</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"date"</span><span class="o">);</span>

        <span class="c1">//í…ìŠ¤íŠ¸ë·°ì— ë©”ì‹œì§€ ì •ë³´ ì„¤ì •</span>
        <span class="nc">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">sender</span><span class="o">+</span> <span class="s">"ìœ¼ë¡œë¶€í„° ë¬¸ì ë„ì°©"</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
        <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"ë³´ë‚¸ì‚¬ëŒ: "</span><span class="o">+</span><span class="n">sender</span><span class="o">+</span><span class="s">"\në‚´ìš©: "</span><span class="o">+</span><span class="n">contents</span><span class="o">+</span><span class="s">"\në‚ ì§œ: "</span><span class="o">+</span><span class="n">date</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// ìƒˆë¡œìš´ ì¸í…íŠ¸ê°€ ë„ì°©í•˜ë©´ í˜¸ì¶œë˜ëŠ” ì½œë°± ë©”ì†Œë“œ</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onNewIntent</span><span class="o">(</span><span class="nc">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onNewIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>

        <span class="c1">// ì¸í…íŠ¸ë¡œë¶€í„° ë°œì‹ ì, ë‚´ìš©, ë‚ ì§œ ì •ë³´ ë°›ì•„ì™€ì„œ ì €ì¥</span>
        <span class="nc">String</span> <span class="n">sender</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"sender"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"contents"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">date</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"date"</span><span class="o">);</span>

        <span class="c1">//í…ìŠ¤íŠ¸ë·°ì— ë©”ì‹œì§€ ì •ë³´ ì„¤ì •</span>
        <span class="nc">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">sender</span><span class="o">+</span> <span class="s">"ìœ¼ë¡œë¶€í„° ë¬¸ì ë„ì°©"</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
        <span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"ë³´ë‚¸ì‚¬ëŒ: "</span><span class="o">+</span><span class="n">sender</span><span class="o">+</span><span class="s">"\në‚´ìš©: "</span><span class="o">+</span><span class="n">contents</span><span class="o">+</span><span class="s">"\në‚ ì§œ: "</span><span class="o">+</span><span class="n">date</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì•¡í‹°ë¹„í‹°ëŠ” ì¸í…íŠ¸ì—ì„œ ë©”ì‹œì§€ ì •ë³´ë¥¼ ê°€ì ¸ì™€ í…ìŠ¤íŠ¸ë·°ì— ë‚´ìš©ì„ í‘œì‹œí•œë‹¤. ì•¡í‹°ë¹„í‹°ì˜ ë ˆì´ì•„ì›ƒ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/textView"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"ìˆ˜ì‹ ë°›ì€ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤."</span>
        <span class="na">android:textSize=</span><span class="s">"20dp"</span>
        <span class="na">android:maxLines=</span><span class="s">"40"</span>
        <span class="na">android:layout_marginTop=</span><span class="s">"350dp"</span>
        <span class="na">android:layout_marginLeft=</span><span class="s">"10dp"</span>
        <span class="na">android:layout_marginRight=</span><span class="s">"10dp"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div></div>

<p>ì•±ì„ ì‹¤í–‰í•˜ê³  ë¬¸ìë©”ì‹œì§€ë¥¼ ë°›ì•„ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚´ìš©ì´ í…ìŠ¤íŠ¸ë·°ì— í‘œì‹œëœë‹¤. ê·¸ë¦¬ê³  ë°±ê·¸ë¼ìš´ë“œì—ì„œë„ ì‹¤í–‰ë˜ë¯€ë¡œ ë‹¤ë¥¸ ì‘ì—…ì„ í•˜ë‹¤ê°€ ë¬¸ìê°€ ì˜¤ë©´ ì•¡í‹°ë¹„í‹°ê°€ ëœ¬ë‹¤.</p>

<p><img src="/images/android/20/1.jpg" alt="1" width="30%" height="30%" /></p>
:ET